{% extends 'base.twig' %}

{% block content %}

  {% include "./partials/background-lines.twig" %}

  <div class="results">
    <header class="results__header">
      <nav>
        <ul>
          <li>
            <button class="header__button header__switch header__button--active" data-index="0">
              publications
              <span>{{results[0]|length}}</span>
            </button>
          </li>
          <li>
            <button class="header__button header__switch" data-index="1">
              projets
              <span>{{results[1]|length}}</span>
            </button>
          </li>
          <li>
            <button class="header__button header__switch" data-index="2">
              événements
              <span>{{results[2]|length}}</span>
            </button>
          </li>
          <li>
            <button class="header__button header__switch" data-index="3">
              auteurs
              <span>{{results[3]|length}}</span>
            </button>
          </li>
          <li>
            <button class="header__button header__button--filter">
              filtrer
            </button>
          </li>
        </ul>
      </nav>
    </header>
    <div class="results__filters">
    {% for taxonomy in filters %}
      <div class="taxonomy {% if taxonomy|length > 10 %} taxonomy-fix {% endif %}">
        <p class="taxonomy__title">
          {% if taxonomy[0].taxonomy == 'research_field' %}
            {{__('théorie')}}
          {% elseif taxonomy[0].taxonomy == 'research_topic' %}
            {{__('objets de recherche')}}
          {% elseif taxonomy[0].taxonomy == 'key_concept' %}
            {{__('concepts clés')}}
          {% elseif taxonomy[0].taxonomy == 'axis' %}
            {{__('axes')}}
          {% else %}
            {{ taxonomy[0].taxonomy }}
          {% endif %}
        </p>
        <ul class="taxonomy__filters">
          {% for term in taxonomy %}
          <li>
            <button class="filter" data-slug="{{term.slug}}" data-taxonomy="{{term.taxonomy}}">
              <div class="filter__radio"></div>
              <p class="filter__label">{{term.name}}</p>
            </button>
          </li>
          {% endfor %}
        </ul>
      </div>
    {% endfor %}
    </div>
    <div class="results__selected-filters">
      <ul class="selected__container">
        <li class="selected__item">
          <div class="item__label">label</div>
          <button class="item__delete">
            <span></span>
            <span></span>
          </button>
        </li>
      </ul>
      <button class="selected__delete">tout supprimer</button>
    </div>
    <div class="results__list-wrapper">
    {% for index,result in  results %}
      <div class="list__container {% if index == 0 %}list__container--active{% endif %}">
        <ul class="list__header">
          <li class="header__item item--title">
            titre
          </li>
          <li class="header__item item--domain">
            publication
          </li>
          <li class="header__item item--authors">
            Auteur
          </li>
          <li class="header__item item--date">
            Date
          </li>
          <li class="header__item item--rubrics">
            Rubriques
          </li>
        </ul>
        <ul class="list">
        {% for post in result %}
            {% include './partials/card-result.twig' %}
          {% endfor %}
        </ul>
      </div>
      {% endfor %}
    </div>
  </div>


{% endblock %}